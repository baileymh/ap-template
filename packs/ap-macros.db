{"_id":"UymavCSsuItvQEVv","name":"Create Entity List","permission":{"default":0,"IPeKQhMz2Odi77tR":3},"type":"script","flags":{"macro-marker":{"activeData":{"icon":"icons/svg/dice-target.svg","tooltip":"Create Entity List","colour":"#ff0000","trigger":""}},"combat-utility-belt":{"macroTrigger":""},"furnace":{"runAsGM":false},"core":{"sourceId":"Macro.4ly93L6Frwkv7fPl"}},"scope":"global","command":"let key = `ap-template.ap1-journals`;\n\n(async ()=>{\n  let pack = game.packs.get(key);\n  await pack.getIndex();\n\n  let index_links = pack.index.map((item)=> `@Compendium[${key}.${item._id}]{${item.name}}`);\n\n  await JournalEntry.create({\n    name : key,\n    content : `<table>${index_links.reduce((acc, str)=> acc+=`<tr><td>${str}</td></tr>`, ``)}</table>`,\n    folder : ``, \n   });\n\n  toggleJournal({ name : key });\n})();\n\nfunction toggleJournal({ name })\n{\n  let journal = game.journal.getName(name);\n  journal.sheet.rendered ? journal.sheet.close() : journal.sheet.render(true);\n  return journal;\n}","author":"IPeKQhMz2Odi77tR","img":"icons/svg/dice-target.svg","actorIds":[]}
